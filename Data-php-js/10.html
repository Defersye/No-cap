<!-- <!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Хаотичные круги</title>
   <style>
      body {
         margin: 0;
      }

      canvas {
         display: block;
      }
   </style>
</head>

<body>
   <canvas id="canvas"></canvas>
   <script>
      const canvas = document.getElementById("canvas");
      const ctx = canvas.getContext("2d");

      // Параметры
      const width = window.innerWidth;
      const height = window.innerHeight;
      canvas.width = width;
      canvas.height = height;
      const minRadius = 10;
      const maxRadius = 50;
      const minSpeed = 1;
      const maxSpeed = 5;

      // Массив окружностей
      let circles = [];

      // Функция для создания окружности
      function createCircle() {
         return {
            x: Math.random() * width,
            y: Math.random() * height,
            radius: Math.floor(Math.random() * (maxRadius - minRadius + 1)) + minRadius,
            color: `rgb(${Math.floor(Math.random() * 256)}, ${Math.floor(Math.random() * 256)}, ${Math.floor(Math.random() * 256)})`,
            angle: Math.random() * Math.PI * 2, // угол в радианах
            speed: Math.random() * (maxSpeed - minSpeed) + minSpeed,
         };
      }

      // Функция для отрисовки круга
      function drawCircle(circle) {
         ctx.beginPath();
         ctx.arc(circle.x, circle.y, circle.radius, 0, Math.PI * 2);
         ctx.fillStyle = circle.color;
         ctx.fill();
      }

      // Функция для обновления позиции круга
      function updateCircle(circle) {
         circle.x += Math.cos(circle.angle) * circle.speed;
         circle.y += Math.sin(circle.angle) * circle.speed;

         // Проверка выхода за границы экрана
         if (circle.x + circle.radius < 0) {
            circle.angle = Math.PI - circle.angle;
         } else if (circle.x - circle.radius > width) {
            circle.angle = Math.PI - circle.angle;
         }
         if (circle.y + circle.radius < 0) {
            circle.angle = 2 * Math.PI - circle.angle;
         } else if (circle.y - circle.radius > height) {
            circle.angle = 2 * Math.PI - circle.angle;
         }
      }

      // Функция для проверки столкновения с курсором
      function isColliding(circle, mouseX, mouseY) {
         const distance = Math.hypot(circle.x - mouseX, circle.y - mouseY);
         return distance < circle.radius;
      }

      // Функция для отталкивания от курсора
      function handleCollision(circle, mouseX, mouseY) {
         const dx = circle.x - mouseX;
         const dy = circle.y - mouseY;
         const angle = Math.atan2(dy, dx); // угол столкновения
         circle.angle = Math.PI + angle + Math.PI; // отталкивание
      }

      // Функция отрисовки всех кругов
      function draw() {
         ctx.clearRect(0, 0, width, height); // Очистка экрана

         for (let i = 0; i < circles.length; i++) {
            const circle = circles[i];

            updateCircle(circle);
            drawCircle(circle);
         }

         window.requestAnimationFrame(draw);
      }

      // Инициализация
      for (let i = 0; i < 100; i++) {
         circles.push(createCircle());
      }

      // Запуск анимации
      draw();

      // Обработка движения мыши
      canvas.addEventListener("mousemove", (event) => {
         const mouseX = event.clientX;
         const mouseY = event.clientY;

         // Обновление позиции курсора
         for (let i = 0; i < circles.length; i++) {
            const circle = circles[i];

            // Проверка столкновения
            if (isColliding(circle, mouseX, mouseY)) {
               handleCollision(circle, mouseX, mouseY);
            }
         }
      });
   </script>
</body>

</html>
 -->



<!DOCTYPE html>
<html>

<head>
   <style>
      canvas {
         position: absolute;
         top: 0;
         left: 0;
      }
   </style>
</head>

<body>

   <canvas id="canvas"></canvas>

   <script>
      var canvas = document.getElementById('canvas');
      var ctx = canvas.getContext('2d');

      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;

      var mouse = { x: null, y: null };

      window.addEventListener('mousemove', function (event) {
         mouse.x = event.x;
         mouse.y = event.y;
      });

      function Circle(x, y, dx, dy, radius, color) {
         this.x = x;
         this.y = y;
         this.dx = dx;
         this.dy = dy;
         this.radius = radius;
         this.color = color;

         this.draw = function () {
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2, false);
            ctx.fillStyle = this.color;
            ctx.fill();
         }

         this.update = function () {
            if (this.x + this.radius > canvas.width || this.x - this.radius < 0) {
               this.dx = -this.dx;
            }

            if (this.y + this.radius > canvas.height || this.y - this.radius < 0) {
               this.dy = -this.dy;
            }

            var dx = mouse.x - this.x;
            var dy = mouse.y - this.y;
            var distance = Math.sqrt(dx * dx + dy * dy);

            if (distance < this.radius) {
               this.dx = -this.dx;
               this.dy = -this.dy;
            }

            this.x += this.dx;
            this.y += this.dy;

            this.draw();
         }
      }

      var circles = [];

      for (var i = 0; i < Math.random() * 100; i++) {
         var radius = Math.random() * 50;
         var x = Math.random() * (canvas.width - radius * 2) + radius;
         var y = Math.random() * (canvas.height - radius * 2) + radius;
         var dx = (Math.random() - 0.5) * 10;
         var dy = (Math.random() - 0.5) * 10;
         var color = 'rgb(' + Math.random() * 255 + ',' + Math.random() * 255 + ',' + Math.random() * 255 + ')';
         circles.push(new Circle(x, y, dx, dy, radius, color));
      }

      function animate() {
         requestAnimationFrame(animate);
         ctx.clearRect(0, 0, canvas.width, canvas.height);

         for (var i = 0; i < circles.length; i++) {
            circles[i].update();
         }
      }

      animate();
   </script>

</body>

</html>